#!/usr/bin/python
import whois, argparse;

target = "aied.com.br";
msg_usage = "Use assim: ./whois_info.py -d <dominio>";
msg_domain = "Informe o nome do alvo";


def func_whois(target):
  query = whois.query(target);
  print("Data de criacao", query.creation_date);
  print("Data de expiracao", query.expiration_date);
  print("Registro", query.registrar);
  print("name", query.name);
  print("Ultimo Update", query.last_updated);
  for domain in query.name_servers:
    print("\tDNS:", domain);


def func_main():
  option = argparse.ArgumentParser(description=msg_usage);
  option.add_argument("-d", "--domain", action="store", dest="domain", help=msg_domain);
  option_args = option.parse_args();

  if option_args.domain == None:
    print(option.description);

  domaintarget = option_args.domain;
  func_whois(domaintarget);

if __name__ == '__main__':
  func_main();
